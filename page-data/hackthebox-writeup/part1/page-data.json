{"componentChunkName":"component---src-components-post-template-index-js","path":"/hackthebox-writeup/part1/","webpackCompilationHash":"fb50f74ef8fc4b66be0d","result":{"data":{"markdownRemark":{"html":"<h2 id=\"preface\"><a href=\"#preface\" aria-label=\"preface permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Preface</h2>\n<p>So my friend just show me this page:</p>\n<p><a href=\"https://www.hackthebox.eu/\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 66.46884272997032%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACdUlEQVQ4y1VTyW4UMRQcZbrb3Xbvm3ubpZklQBJlhiBFSHBAESKCcONADjmg/P83FGV3BsTh9fOzW+VXr8qzIPBxCl8I+J6A/LsXIPBfsqm5llwr9X99WpuYKeVDEMQUVRui6kL+NAF7rgPf93jucu3yQh+OM2dt9gWzB9dxbDbNWEDhCtR9hMPnBuNFhuV5iuNdi0KH6JoOdZNC6wJtoxEqifPzPYa+h5ISZVFguVgiSRJEYWhBLeBin6LfJFi/IeDrzOZ6CPHj4Rt+Pf7E/f0XfL2/Q5pJfPz0AU9Pj7i9fY/tdoPn5994ePiO17zI8+b/AA31rFTsTNncLCN2pvH2ao/1uMBq7NF2NZq2wna/wma3RF7EGMcVtrstyrLgLL0JUC9iC2oob65y22FJylmSox86FGWKqiaLoYVuKgJ3aDiCJIlR89JhWCDLMjvXmRmkAU1Ix9BuGCqRcCiKKzw4FMOjMEHoUZi5FcWZn8F1z6xogv8EgUtBJnfMzEdKghqVHIHGC9AGElsOuVMKfaiwZOhIUSCNvmtJc02aIzvrEMeRHZeSU0yAxkcsIuYllRwYrwjWUckhlFixXvCCoiyh69oCjuu1VTtNYwJO3VmVT4Y8mVnIgBR9uKTg07TC7JlsRmP9Rl8Kx9IN6FcphWVowNI0I+CLy42BsyzCerXC1eUljocD9rsdu+jotcHu3dwccX19gXfHIw6Ha+vJPJ/EMBdVup06DEPSjQWiSFr5G017UL26qpBTvbLMrLGHQVPd6Uy/nEfR6WV5KOuGM2S7aU7QaGrb0DJPzfddq55SHuLU47lrw+ybZ2jD/ifs2zYdGsA/wlU7EPO8e7wAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"htb\" title=\"htb\" src=\"/static/df750c1cea3b9921d8d10012fe213e9e/b9e4f/htb.png\" srcset=\"/static/df750c1cea3b9921d8d10012fe213e9e/cf440/htb.png 148w,\n/static/df750c1cea3b9921d8d10012fe213e9e/d2d38/htb.png 295w,\n/static/df750c1cea3b9921d8d10012fe213e9e/b9e4f/htb.png 590w,\n/static/df750c1cea3b9921d8d10012fe213e9e/61857/htb.png 674w\" sizes=\"(max-width: 590px) 100vw, 590px\" loading=\"lazy\">\n    </span></a></p>\n<p>This page is so interesting that to even sign up for the page is a hacking challenge that you have to solve.</p>\n<p>Let's start right away.</p>\n<h2 id=\"invitation\"><a href=\"#invitation\" aria-label=\"invitation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Invitation</h2>\n<p>Let's go to the invitation page by clicking the Join button somewhere down the home page.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/093e3d459c726a4951396bc280f2c06d/e5a7b/invite.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.32061068702289%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABm0lEQVQ4y31U7XKCMBDkQapgPgiCCCgIHTrazrS+/xtt8wkH2P7YSQjJ3u1tLtH+ILBLJMwYc4FEw8wDdv5/2BPGCUws1iO6kR6M7UbpEQ4RQrYKHAgX0Tze4hCE2QwN+RxATAF3XgEljWhmLoqEyDl4JnA8VeCp0uucyBdEwRbRJm29sR4PON842uEdKi9xEBmYPFokQtmg/xMGSV6WLKTO0GVLyQzMd8xSbWBqR1p3b4qYpBppIivQjXf0H1+49COyssHxfNkgr65Ii8obNdc3mgsttRmmdgX6+zeGzyeGx9POLR4E9v8Pirrz9ZWvaqgzjAW4ylEPHer+hrJt7aGiIai7aU2d6skkInl21xAydUTzfkU73nC6VvZQVtZ2dGj8WoM0P5P6OZ7NPYy5NkIqD2NE7kcHrtLJnL025c9rYy8v904zqVtQeWRknmpyYefO4RedMreemPo5ZrTV1pAbZ+nViahD+8SRJcIRh9ouMdfLqFk8Jszfw2W3bGUEku1j4UjtK6WTSKTJkFGJTs76SVpnuX7OArHBL9m4xl79ECFFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Invitation\"\n        title=\"Invitation\"\n        src=\"/static/093e3d459c726a4951396bc280f2c06d/b9e4f/invite.png\"\n        srcset=\"/static/093e3d459c726a4951396bc280f2c06d/cf440/invite.png 148w,\n/static/093e3d459c726a4951396bc280f2c06d/d2d38/invite.png 295w,\n/static/093e3d459c726a4951396bc280f2c06d/b9e4f/invite.png 590w,\n/static/093e3d459c726a4951396bc280f2c06d/e5a7b/invite.png 655w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Looking at the page source, you can see a suspicious js file named <code class=\"language-text\">inviteapi.min.js</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 524px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1541f32e99cd6fd50397764c27b9d7cc/606d7/source.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.12977099236642%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsSAAALEgHS3X78AAAC2klEQVRIx+VVy27bMBDUB6THxLIe1JOiJEqi5Ecd2EjQ5l4U6G+0aG9F25+f7lJR4riOneTaw4A0H8PZ2dXakWUDX2QIY0nIcXXlIs9pHgrMZnMIESGMMsw8gahaQy7voFZ3EGrA3PNxcfEOaZrBo/nl5RUcL20g2w3qYQc/azGbB3Qgh9YtHQqgCgVZGTTrW+jlFg1B1j38+RzzuYcZCWDimesizXI4zN7UeryY58gyaRHHKYJAIE5SlEpjPVzjethgYzZodA9VG5Q06nZApxcw5YBFt4aTJBm6zkBKhYyUMQSF685c+PQyh1LIGl27Gi82Szq/QtstCbRmVjA0Hxoa2yWcIJJgqLq3KCp+eUCS1+RtDj+IyAKJum5RVo1FVT7FtM5wog9fEdx+Q//5F1Zf/mD55Te6Tz8RffxO+IFALpBR2JrCq6uWiLuTcKK0hGIvSH6uWohEgdfCuLDKfV+QpwUdNqiIsDpD6nCJVGVF3mVkfmmTw0hJFXvoU6ZfRcgKXNej1AdUBv4eAqvO98PXEQZhZC89j1cqDCiLXMCHRI9r/y2h1uYs2QsJw/svpXtQeApHCfn3tMYlVBQVWmoCWndomp5g7sf+yW/ed7ijTAT7RPvqtrsb7Ha3eL++xmKxPophWGG7vaFPL0qomUYWQsQWh4RSltR0lfUyitIHcKcakVO7y2DMAKcsNcWuUVND5RbGG0Ikth8yeM6PcNNlYj5TFOPIeyyIwXPed6Qc/TFmAaUqq+JQCROzQvZq9NHYjs7qpodHxdSxwzCh1l1QE1XICayWFRz7DEdbHu1h/zlpk/c8dypqnKYbFfb90obCr7F3I3KUZW1JDpN3rNyciP7pClVT89T2Io9TYlgBg8mmajhVr5YwDGPrBSuZEJPJ/hEVxwj/UTiVzD4mhd4ByYsIbSh7xh768zbCvcunjH9ufx825HOvTsk5d+7Bw+nSWwmnKI3p8RcV/DGkFXvwXQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"source\"\n        title=\"source\"\n        src=\"/static/1541f32e99cd6fd50397764c27b9d7cc/606d7/source.png\"\n        srcset=\"/static/1541f32e99cd6fd50397764c27b9d7cc/cf440/source.png 148w,\n/static/1541f32e99cd6fd50397764c27b9d7cc/d2d38/source.png 295w,\n/static/1541f32e99cd6fd50397764c27b9d7cc/606d7/source.png 524w\"\n        sizes=\"(max-width: 524px) 100vw, 524px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Here's the file content:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">eval</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">,</span> d</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">e</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> c<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^/</span><span class=\"token punctuation\">,</span> String<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>c<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                d<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> k<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> c<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n            k <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">return</span> d<span class=\"token punctuation\">[</span>e<span class=\"token punctuation\">]</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span>\n            <span class=\"token function-variable function\">e</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token string\">\"\\\\w+\"</span>\n            <span class=\"token punctuation\">}</span>\n            c <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>c<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                p <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\\\b\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">e</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\\\b\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"g\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> p\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'1 i(4){h 8={\"4\":4};$.9({a:\"7\",5:\"6\",g:8,b:\\'/d/e/n\\',c:1(0){3.2(0)},f:1(0){3.2(0)}})}1 j(){$.9({a:\"7\",5:\"6\",b:\\'/d/e/k/l/m\\',c:1(0){3.2(0)},f:1(0){3.2(0)}})}'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token number\">24</span><span class=\"token punctuation\">,</span>\n        <span class=\"token number\">24</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"response|function|log|console|code|dataType|json|POST|formData|ajax|type|url|success|api|invite|error|data|var|verifyInviteCode|makeInviteCode|how|to|generate|verify\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"|\"</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-js\">eval</code> function will execute whatever the inner function's output is. Let's copy it out and run it inside the console.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 495px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7c0f9c78d7aea62b794a4a70374ff79f/fa082/output.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 129.6969696969697%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsSAAALEgHS3X78AAADI0lEQVRIx31VaXazOBD0XWaSMSDQxuoFg9ls583c/zY91Q0kzhecH/1aSOpSVWlhF4YJ/RaxzihzJRW6osIcyPmKlDIv5++CIKZXwRP2+4hUZMjHOR3NibL0TBagYbhds/uNHU9ItCedeIojizAA/xrbZPir5CAhBcAsKWlIRzq4C/m8oQjAK+CfwBuAT3IDRXHiKFJW+vYsK9S/eP6H5OfVuJ2akpzOBVApLYyDfxR8VbIY+8s5kGAiTwyfJazh4oxK7G5eNlQdG/JZQcpoMvDUYMzqkpI4xYIeNuhXDFGAY5JAaogihQJtKrLpgfJTTTZ3AErJw9fUnslAgcI89vWl5NX0OJ53OFx8i5CDffxacvhCciibYXCQITcu0E6Xoq8IxRb1ZJH6eQ5XySrJydgSt6Qi7RpEC5/c7BUySwxxLkUq+uZ2LrU/ASHX+Ctp3wmQTXt899In/eiL9QGsC1kwhpcMrPDNtdubgkKX3WYAe0HuFmCAgjGDcDA7xYDIAfz8cbC/zqGRsGmH1b20I8hiafM8JQDf8uLjbuv+zl6lnyxm/xCRk35hJkcqE+/mOV7amwxFcv4gm01gOeF7JFd8iA2O+xA87vL7Z9h0EFs2N0UmCdiNfNVSdurEuwR+yq7bGu2z+KuREzO3ebO2Xxs+9fxUyRHBkcCZFK+2Ilhi8fLlA8u3wfvD0p4v/nPMir5/yy5HysjFXoM7FV6XGP3GpN/GZPxp3nPN6v+uaD5wXy2K8XpY7CwkVtWZLpcrleWJTqeGzucW+YK+Tvr5u20HqjDe9TfqulHq5Or5043274Ec6HUVLuiHG53rK92mB4omejz+o+t1kBgw1qPvdMQL7gtyLv9kuQGoaRjvNI0PYTEB8A6wx/1fMJkkpumDxvGD6rqlIxTUWLgoDpCfMOC0AC6HGp4ws7btqWk6apserEbqAXSEbJbH0hmIWa42cNuD6S6tH3jWw+WBnI0WAHgzguWw5uEuTK4LS2bfL5kt4D6Wvouzmv7+643e30N6e9tLZiYshzeHcwvfGrA4HGrK8BvgRbV2eNUtssdmZkKG6/8Hx/EwOOoFrDkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"output\"\n        title=\"output\"\n        src=\"/static/7c0f9c78d7aea62b794a4a70374ff79f/fa082/output.png\"\n        srcset=\"/static/7c0f9c78d7aea62b794a4a70374ff79f/cf440/output.png 148w,\n/static/7c0f9c78d7aea62b794a4a70374ff79f/d2d38/output.png 295w,\n/static/7c0f9c78d7aea62b794a4a70374ff79f/fa082/output.png 495w\"\n        sizes=\"(max-width: 495px) 100vw, 495px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The output is escaped and minified. After un-escaping it prettifying the code will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">verifyInviteCode</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">code</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> formData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> code<span class=\"token punctuation\">:</span> code <span class=\"token punctuation\">}</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n        dataType<span class=\"token punctuation\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token punctuation\">:</span> formData<span class=\"token punctuation\">,</span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/api/invite/verify\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">success</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">error</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">makeInviteCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n        dataType<span class=\"token punctuation\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/api/invite/how/to/generate\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">success</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">error</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Take a look at the <code class=\"language-text\">makeInviteCode</code> function. The function make a request to the server and will tell you how to get the invitation code. Let's run it </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 509px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c889c6d54795cdf2d776219a5dfeccd/666cd/make-invite.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 105.50098231827111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAC3klEQVQ4y41UWXLiMBTMDbJNpeYCAWxZu7wAZg8hCVAz979MT0uEYAKpmo8uyZbU7/XbbrR2sLaEIeLqbA3tPVxVQiqLLFMQRUCeK2QDwW9JFB3IwxlXYzxu4scFRCTRqFc1yukQtl5BuxWkbnhueW557pMhIQz/yRPhweJ12KFHGI9Qlyu01QbjZoPQbokdAo0oMyapOye85uFRRpRsTAWnGoaDYfAVdGgZkiEKKsgy8X+Sj5dsFUgyREu5bTlFPZrDTT4QRkto7ZF9e/MleTAoEg57knEtGEcpDSTjpUSgt4YSPQpdopAuJWjQz9N6RqiSrJAsxoxHEuPHcPUMQnpIPyKGTEiJvCApvxXPI0w1g7LNOWHBS1LahBgXqQLCbJfgRmuUiz8IU8psKLdq4cevKJd/07+4lvN98jgqvMwyf+bMmm/fDpi8J9hmCesbGCbEMJaecfTthlXAUjJ1IsyF/kaY3C4o08GNN4kk0HrgQ19NYBwJ60U6S8bqSSJ09FjHsEh7yrIg+1eWC5suxlhpWo8xUm4IRc9MyZIx7CCWkmCochZ1TFJ8F5NpbErKZ+sxMTFB8aImgYwPtUpS8q7BSOKZMD+FiJ2jKNmNk3TrypPkvCNZ0QM/XsNPlxA02I8lwrNBp3ev1e6X5G61x1aSHBBKVVg3O6zDGgu3xMq/4IX7Wg8T8fF+96214bxTEiE9LOi+o5T38h37eo9tvcVH9ZH2c7dAPxMXHvb7Asvl+mdCz/jsq11CJNtW20Q4c3MSFheEvV6O19e3nwmNabAYbeF9i4ZTZe5ZRgyDyPXVOPZ6Auv15kodsmwkSyWWh7IV27CB4752o1QJscS+j7mjh4nw0kOf+tbX7Aj2s3EhtWTBHo9tei3D0UiMYZJ8nDQHcL6xzqTyUBwUWh+GRiSKg+MwA7v3T1Pq+TnDYvGCm6en33h4eMTd3f0nHhJub+86uP9aT/cu8fj4C/8A6GmKlaeQSGwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"make invite\"\n        title=\"make invite\"\n        src=\"/static/2c889c6d54795cdf2d776219a5dfeccd/666cd/make-invite.png\"\n        srcset=\"/static/2c889c6d54795cdf2d776219a5dfeccd/cf440/make-invite.png 148w,\n/static/2c889c6d54795cdf2d776219a5dfeccd/d2d38/make-invite.png 295w,\n/static/2c889c6d54795cdf2d776219a5dfeccd/666cd/make-invite.png 509w\"\n        sizes=\"(max-width: 509px) 100vw, 509px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The data is encoded with base64. Decrypting it will yield:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">In order to generate the invite code, make a POST request to /api/invite/generate</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Use the <code class=\"language-js\">$<span class=\"token punctuation\">.</span>ajax</code> function like the one above to make the request</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 492px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d6933649b3b3d744e6ec09040a84a1c4/333b7/generated.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.130081300813%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACXElEQVQ4y3VU23baMBDkbwrW/eKLwEBCQhqSJm3ah/7/l0xnZRJCKA9zZMvS7O7MrmfOJ3ifEUKLGInQw3NNQ4uQMrRzMLYQPZqFxmJhPtA0Ant8thWzzwc+Y/7NIJaMdtsjdCuYsIHxIxoVSCyXHc+dyN7X2TvzV8gB30fk9YCu3GHsHrEtTyjjC4P8Rjs+s6LuePZ07wqhqYesC/CUog1rZD+g7ShDu2agG7jYQyt3WfL1DC1cikRC51YoJC3tqpL54Y76DjDaX5b8P/0aQjG6MQHWJCQSOkvjcmKAFSxhbDqapM9IZ3KpXrSxQikLrQNiLlDMQMRv+F2Z+HFJk7zR054W4mrQMUNzJBI4N63t5gnt7U/E1QPy9ge6uzfk1R6xLdzb12/d7hfNecHw8Bd5/F6D1wzPWmWua7Q0PiJvnpHWBxLSTXkvt9RtidiJKbdTQO7H5R42llPJZ2ZI2tQusE1CuUdipkIa+i0iTZCLftgx4IFE99xnEL67bkttCyvMX0yRDJWvkcXNVsrkmgc6m8eaeeo3dc8fCcQgT0JVW4gZTtpN4yfmSKY+08lAU9Q0XopOKwaaVgtlW+i8ReM4jqbFwmQoL+PJDDXFrDB+ikJYzrORDEoPFTLm4jah6Oh8oev4qUombscJEozOX/YhCWNc4n44YD88Yb98wePyFWPecfQOWMdt1VrkWZz9LPT/TVlwTWmD3eoVNyR9SHv8KW8Y+XOQsk3jJ0evTNhFhmKK8R0sGztIq+QBzk86W5c+2uMaLmZZsvAcfFfHLlSi0ySFqrcYc+0f8A8IIxSK/cv/qAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"generated\"\n        title=\"generated\"\n        src=\"/static/d6933649b3b3d744e6ec09040a84a1c4/333b7/generated.png\"\n        srcset=\"/static/d6933649b3b3d744e6ec09040a84a1c4/cf440/generated.png 148w,\n/static/d6933649b3b3d744e6ec09040a84a1c4/d2d38/generated.png 295w,\n/static/d6933649b3b3d744e6ec09040a84a1c4/333b7/generated.png 492w\"\n        sizes=\"(max-width: 492px) 100vw, 492px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Once again the data looks like it is encoded with base64 (if you see a bunch of alphanumeric characters and a few \"=\", it is almost certainly base64). </p>\n<p>Decrypting the message will give you the key:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">TKKFO-AEVZU-NINHD-LKDMF-KRUPP</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Don't bother trying to use my  key. They generate a unique key for every user, so my key will be invalid on your machine. </p>\n<p>Input the key, and they will lead you to the sign up page. Complete the form to create your own account.</p>","frontmatter":{"date":"2019-06-09T21:51:00.000Z","title":"Hackthebox writeup (Part 1)","keyword":["ctf","hacking"],"description":"Just a ctf writeup"},"fields":{"slug":"/hackthebox-writeup/part1/"},"tableOfContents":"<ul>\n<li><a href=\"/hackthebox-writeup/part1/#preface\">Preface</a></li>\n<li><a href=\"/hackthebox-writeup/part1/#invitation\">Invitation</a></li>\n</ul>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"older":{"frontmatter":{"title":"PicoCTF 2018 Writeup Cryptography.","date":"2019-05-04T21:40:00.000Z","description":"Math and stuff.","keyword":["ctf","hacking"]},"fields":{"slug":"/picoctf2018-writeup/crypto/","readingTime":{"text":"10 min read"}}},"newer":{"frontmatter":{"title":"PicoCTF 2018 Writeup Web Exploitation.","date":"2019-09-17T23:12:00.000Z","description":"No Facebook hacking tutorial though.","keyword":["ctf","hacking","web"]},"fields":{"slug":"/picoctf2018-writeup/web/","readingTime":{"text":"5 min read"}}},"series":"hackthebox-writeup"}}}